<!DOCTYPE html>
<html ng-app="asciiApp">
    <head>
        <title>Discount Ascii Warehouse</title>
        <!-- Dependencies -->
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-resource.min.js"></script>
        <!-- TODO: change for min versions -->
        <script src="node_modules/angulargrid/angulargrid.js"></script>
        <script src="node_modules/moment/moment.js"></script>
        <!-- Code -->
        <script src="scripts/services/apiService.js"></script>
        <script src="app.js"></script>
        <script src="scripts/controllers/gridController.js"></script>
        <link rel="stylesheet" type="text/css" href="styles/styles.css" />
    </head>
    <body>
        <header>
            <h1>Discount Ascii Warehouse</h1>
            <p>Here you're sure to find a bargain on some of the finest ascii available to purchase. Be sure to peruse our selection of ascii faces in an exciting range of sizes and prices.</p>
            <p>But first, a word from our sponsors:</p> <script>document.write('<img class="ad" src="/ad/?r=' + Math.floor(Math.random()*1000) + '"/>');</script>
        </header>

        <section class="products" ng-controller="gridController">
          <button ng-click="sortBy('id')">Sort by ID</button>
          <button ng-click="sortBy('price')">Sort by Price</button>
          <button ng-click="sortBy('size')">Sort by Size</button>
          <div class="dynamic-grid"
            angular-grid="products"
            ag-grid-no="1"
            ag-gutter-size="10"
            ag-id="gallery"
            ag-refresh-on-img-load="false"
            ag-infinite-scroll="loadMore()">
            <div data-ng-repeat="product in products" class="grid">
              <div class="grid-img" ng-if="::!product.ad">
                <div ng-style="::{'font-size':product.size+'px'}">{{::product.face}}</div>
                <br />
                <div>Id: {{::product.id}}</div>
                <div>Size: {{::product.size}}px</div>
                <div>Price: {{::product.price / 100 | currency:'$':2}}</div>
                <div>Date: {{::product.date | date}}</div>
              </div>
              <img ng-if="::product.ad" class="ad" ng-src="/ad/?r={{::product.random}}" />
            </div>
          </div>
          <div ng-show="end" class="end">~ end of catalogue ~</div>
        </section>
    </body>
</html>
